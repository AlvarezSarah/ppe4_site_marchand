{% extends 'base.html.twig' %}

{% block title 'FIGURINA | Panier' %}

{% block body %}

    {% if is_granted('IS_AUTHENTICATED_FULLY') %}
        <div class="jumbotron">
            <div class="container ">
                <p style="font-weight: bold; font-size : 2rem; ">Mon panier</p><br>

            </div>
            <div class="container">
                <div class="col-md-2"></div>
                <div class="col-md-8">
                    {% for message in app.flashes('success') %}
                        <div class="alert alert-danger">
                            {{ message }}
                        </div>
                    {% endfor %}
                </div>
                <div class="col-md-2"></div>
            </div>
            <div class="col-md-12">
                <div class="row">
                    <div class="col-md-8">
                        <div class="jumbotron">
                            {% if items | length > 0 %}
                                <table class="table">
                                    <thead style="background-color: #0a0a0a">
                                    <style>
                                        th {
                                          color:#FFFFFF;
                                        }
                                        a {
                                            color: #222222;
                                        }
                                    </style>
                                    <tr>
                                        <th>Image</th>
                                        <th>Nom Figurines</th>
                                        <th>Quantité</th>
                                        <th></th>
                                        <th></th>
                                        <th>Prix</th>
                                        <th></th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for item in items %}
                                        <tr>
                                            <td>
                                                {% if item.produit.filename %}
                                                    <img src="images/produits/{{ item.produit.filename }}" alt="Symfony!" style="width: 120px; height:auto; float: left;">
                                                {% else %}
                                                    <img src="{{ 'images/produits/image_de_bases.png' }}" alt="Symfony!" class="image-display" style="width: 20%; height:auto;" />
                                                {% endif %}
                                            </td>
                                            <td style="font-weight: bold;">{{ item.produit.libelle }}</td>
                                            <td>{{ item.quantity }}</td>
                                            <td>
                                                <a href="{{ path('panier.unAjout', {'id': item.produit.id}) }}" style="float: left;" class="btn btn-black btn-sm"> +
                                                </a>
                                            </td>
                                            <td>
                                                <a href="{{ path('panier.uneSuppresion', {'id': item.produit.id}) }}" style="float: left;" class="btn btn-grey btn-sm"> -
                                                </a>
                                            </td>
                                            <td>{{ item.produit.prixht * item.quantity }} €</td>
                                            <td>
                                                <a href="{{ path('panier.remove', {'id': item.produit.id}) }}" class="btn btn-danger btn-sm">
                                                    <i class="fas fa-trash"></i>
                                                </a>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            {% else %}
                                <p>Surprise, c'est vide !</p>
                            {% endif %}
                        </div>
                        <a href="{{ path('produit_index') }}" style="float:left;">< continuer mes achats</a>
                    </div>
                    <div class="col-md-4">
                        <div class="jumbotron">
                            <p style="font-weight: bold; text-align: center">Livraison : </p>
                            <p style="text-align: center">{{ livraison }} €</p><br>
                            <p style="font-weight: bold; text-align: center">Total : </p>
                            <p style="text-align: center">{{ total }} €</p><br><br>
                            <div class="text-center">
                                {% if items | length > 0 %}
                                    <td>
                                        <a href="{{ path('commande', {'id': item.produit.id})}}" class="btn btn-grey">Commander</a>
                                    </td>
                                {% endif %}
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    {% else %}
        <div class="jumbotron">
            <div class="container text-center">
                <h3>Oups, il n'y a rien par ici. Veuillez vous connectez avant d'accéder au panier : <a href="{{ path('app_login') }}">Connexion </a></h3>
            </div>
        </div>
    {% endif %}
{% endblock %}


